From 81479b692451c8e65a60ee46b06370c6b61010d0 Mon Sep 17 00:00:00 2001
From: Mehdi Sabwat <mehdi@videolabs.io>
Date: Wed, 2 Jun 2021 00:55:52 +0200
Subject: [PATCH 04/18] compat: remove pathconf

this function is not used anywhere anymore.
---
 compat/pathconf.c | 33 ---------------------------------
 configure.ac      |  2 +-
 2 files changed, 1 insertion(+), 34 deletions(-)
 delete mode 100644 compat/pathconf.c

diff --git a/compat/pathconf.c b/compat/pathconf.c
deleted file mode 100644
index fb13e290c7..0000000000
--- a/compat/pathconf.c
+++ /dev/null
@@ -1,33 +0,0 @@
-/*****************************************************************************
- * pathconf.c: POSIX pathconf() replacement
- *****************************************************************************
- * Copyright (C) 2017 VLC authors and VideoLAN
- *
- * Authors: Dennis Hamester <dhamester@jusst.de>
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms of the GNU Lesser General Public License as published by
- * the Free Software Foundation; either version 2.1 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
- * GNU Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public License
- * along with this program; if not, write to the Free Software Foundation,
- * Inc., 51 Franklin Street, Fifth Floor, Boston MA 02110-1301, USA.
- *****************************************************************************/
-
-#ifdef HAVE_CONFIG_H
-# include <config.h>
-#endif
-
-#include <vlc_common.h>
-
-#if defined(_WIN32)
-/* Windows does not have pathconf, but that is OK */
-#else
-# error pathconf not implemented on your platform!
-#endif
diff --git a/configure.ac b/configure.ac
index 25cf3d1b50..74d42df6dc 100644
--- a/configure.ac
+++ b/configure.ac
@@ -699,7 +699,7 @@ need_libc=false
 
 dnl Check for usual libc functions
 AC_CHECK_FUNCS([accept4 dup3 fcntl flock fstatat fstatvfs fork getmntent_r getenv getpwuid_r isatty memalign mkostemp mmap open_memstream newlocale pipe2 pread posix_fadvise posix_madvise setlocale stricmp strnicmp strptime uselocale wordexp])
-AC_REPLACE_FUNCS([aligned_alloc atof atoll dirfd fdopendir flockfile fsync getdelim getpid lfind lldiv memrchr nrand48 poll posix_memalign recvmsg rewind sendmsg setenv strcasecmp strcasestr strdup strlcpy strndup strnlen strnstr strsep strtof strtok_r strtoll swab tdestroy tfind timegm timespec_get strverscmp pathconf])
+AC_REPLACE_FUNCS([aligned_alloc atof atoll dirfd fdopendir flockfile fsync getdelim getpid lfind lldiv memrchr nrand48 poll posix_memalign recvmsg rewind sendmsg setenv strcasecmp strcasestr strdup strlcpy strndup strnlen strnstr strsep strtof strtok_r strtoll swab tdestroy tfind timegm timespec_get strverscmp])
 AC_REPLACE_FUNCS([gettimeofday])
 AC_CHECK_FUNC(fdatasync,,
   [AC_DEFINE(fdatasync, fsync, [Alias fdatasync() to fsync() if missing.])
-- 
2.32.0

