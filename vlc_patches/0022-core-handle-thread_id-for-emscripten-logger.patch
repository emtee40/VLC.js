From fb2f23c0fd341e11813a396350b80ac881a6f2f1 Mon Sep 17 00:00:00 2001
From: Mehdi Sabwat <mehdi@videolabs.io>
Date: Fri, 9 Apr 2021 19:58:35 +0200
Subject: [PATCH 6/6] core: handle thread_id for emscripten logger

---
 src/posix/thread.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/posix/thread.c b/src/posix/thread.c
index e34725c7f1..19476db055 100644
--- a/src/posix/thread.c
+++ b/src/posix/thread.c
@@ -318,7 +318,11 @@ int vlc_clone_detach (vlc_thread_t *th, void *(*entry) (void *), void *data,
 
 VLC_WEAK unsigned long vlc_thread_id(void)
 {
-     return -1;
+#if defined (__EMSCRIPTEN__)
+    return pthread_self();
+#else // not implemented
+    return -1;
+#endif
 }
 
 int vlc_set_priority (vlc_thread_t th, int priority)
-- 
2.28.0

